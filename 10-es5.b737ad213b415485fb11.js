function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{sKqT:function(e,t,n){"use strict";n.r(t),n.d(t,"HomeModule",(function(){return O}));var o,a=n("PCNd"),i=n("rJuT"),r=n("tyNb"),s=n("Womt"),c=n("fXoL"),h=n("Ykpw"),d=n("ofXK"),l=n("NFeN"),p=n("Xa2L"),g=((o=function(){function e(t){_classCallCheck(this,e),this.addSvgIconService=t}return _createClass(e,[{key:"ngOnInit",value:function(){this.addSvgIconService.addSvgIcon("logo")}}]),e}()).\u0275fac=function(e){return new(e||o)(c.Nb(h.a))},o.\u0275cmp=c.Hb({type:o,selectors:[["cpc-loading-page"]],decls:13,vars:0,consts:[[1,"loading-page-wrap"],[1,"title-word-area"],[1,"title-wrap"],["svgIcon","logo"]],template:function(e,t){1&e&&(c.Tb(0,"section",0),c.Tb(1,"div"),c.Tb(2,"div",1),c.Tb(3,"div",2),c.Ob(4,"mat-icon",3),c.Tb(5,"h1"),c.yc(6,"\u5e73\u6c11\u8863\u7269\u5206\u6790\u9593"),c.Sb(),c.Sb(),c.Tb(7,"p"),c.yc(8,"\u9673\u6021\u975c \u524d\u7aef\u5de5\u7a0b\u5e2b\u4f5c\u54c1 sk573129@gmail.com"),c.Sb(),c.Tb(9,"p"),c.Ob(10,"mat-spinner"),c.Tb(11,"span"),c.yc(12,"Loading"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb())},directives:[l.a,p.b],styles:[".loading-page-wrap[_ngcontent-%COMP%]{background-color:#e0a4a4;position:absolute;width:100%;height:100%;z-index:200}.loading-page-wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:500px;height:300px;background-color:hsla(0,0%,100%,.5);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}.loading-page-wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   div.title-word-area[_ngcontent-%COMP%] > div.title-wrap[_ngcontent-%COMP%]{margin:50px 0 5px;color:#b63636}.loading-page-wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   div.title-word-area[_ngcontent-%COMP%] > div.title-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:38px;height:auto;display:inline-block;margin-right:8px}.loading-page-wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   div.title-word-area[_ngcontent-%COMP%] > div.title-wrap[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:50px;display:inline-block}.loading-page-wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   div.title-word-area[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:last-child{margin-top:40px;color:#b63636;font-size:24px}.loading-page-wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   div.title-word-area[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:last-child   span[_ngcontent-%COMP%]{padding-left:12px}"]}),o),u=["threeJsWrap"],w=["heartLeft"],m=["heartRight"],v=["operateGuideWord"];function C(e,t){1&e&&c.Ob(0,"cpc-loading-page")}var f,M,b,y=[{path:"",component:(f=function(){function e(t,n,o){_classCallCheck(this,e),this.addSvgIconService=t,this.renderer2=n,this.router=o,this.mouse=new s.r,this.raycaster=new s.n,this.objects=[],this.loading=!0}return _createClass(e,[{key:"listenMouseClick",value:function(e){this.loading||this.onMouseClick(e)}},{key:"listenMouseMove",value:function(e){this.loading||this.onMouseMove(e)}},{key:"listenWindowResize",value:function(e){this.loading||this.onWindowResize()}},{key:"ngOnInit",value:function(){this.addSvgIcon()}},{key:"ngAfterViewInit",value:function(){this.initView()}},{key:"addSvgIcon",value:function(){this.addSvgIconService.addSvgIcon("face_home_no_mouth"),this.addSvgIconService.addSvgIcon("heart"),this.addSvgIconService.addSvgIcon("logo")}},{key:"initView",value:function(){this.scene=new s.o,this.camera=new s.k(50,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.z=150,this.renderer=new s.s({antialias:!0}),this.renderer.setClearColor("#F9E3BD"),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer2.appendChild(this.threeJsWrap.nativeElement,this.renderer.domElement),this.addDiamondMesh(),this.setDiamondNavWord(),this.animate3()}},{key:"addDiamondMesh",value:function(){var e=new s.h({color:16777215,wireframe:!0}),t=this.creatCanvasMaterial([{stop:0,color:"#DCC4F3"},{stop:.5,color:"#C0E4F9"},{stop:.7,color:"#007CC0"},{stop:.8,color:"#C0E4F9"},{stop:1,color:"#6EC6F6"}]),n=new s.c(10,5,8,1,!0),o=new s.d(10,0,20,8,1,!0),a=new s.j;this.addMeshIntoGroup(a,n,t,"cloth-analysis",[0,-5,0]),this.addMeshIntoGroup(a,n,e,"cloth-analysis",[0,-5,0]),this.addMeshIntoGroup(a,o,t,"cloth-analysis",[0,-17.5,0]),this.addMeshIntoGroup(a,o,e,"cloth-analysis",[0,-17.5,0]),this.addDiamondGroupIntoScene(a,"cloth-analysis-wrap",[-30,47,0]);var i=this.creatCanvasMaterial([{stop:0,color:"#EEF4BA"},{stop:.5,color:"#C0DAAF"},{stop:.8,color:"#BBEADE"},{stop:1,color:"#F9FFE8"}]),r=new s.d(5,10,5,6,1),c=new s.d(10,0,10,6,1),h=new s.j;this.addMeshIntoGroup(h,r,i,"share-yours",[0,-2.5,0]),this.addMeshIntoGroup(h,r,e,"share-yours",[0,-2.5,0]),this.addMeshIntoGroup(h,c,i,"share-yours",[0,-10,0]),this.addMeshIntoGroup(h,c,e,"share-yours",[0,-10,0]),this.addDiamondGroupIntoScene(h,"share-yours-wrap",[65,5,0]);var d=this.creatCanvasMaterial([{stop:0,color:"#CCE0EB"},{stop:.5,color:"#60BCC1"},{stop:.8,color:"#C1EAD3"},{stop:1,color:"#6ABFCB"}]),l=new s.d(0,6,5,6,1),p=new s.d(6,6,12,6,1),g=new s.d(6,0,5,6,1),u=new s.j;this.addMeshIntoGroup(u,l,d,"random-match",[0,8.5,0]),this.addMeshIntoGroup(u,l,e,"random-match",[0,8.5,0]),this.addMeshIntoGroup(u,p,d,"random-match",[0,0,0]),this.addMeshIntoGroup(u,p,e,"random-match",[0,0,0]),this.addMeshIntoGroup(u,g,d,"random-match",[0,-8.5,0]),this.addMeshIntoGroup(u,g,e,"random-match",[0,-8.5,0]),this.addDiamondGroupIntoScene(u,"random-match-wrap",[30,35,0]);var w=this.creatCanvasMaterial([{stop:0,color:"#FAE6E9"},{stop:.5,color:"#DDA2B1"},{stop:.8,color:"#DCD1E8"},{stop:1,color:"#C9B4D7"}]),m=new s.d(8,12,4,8,1),v=new s.d(12,8,4,8,1),C=new s.j;this.addMeshIntoGroup(C,m,w,"all-story",[0,2,0]),this.addMeshIntoGroup(C,m,e,"all-story",[0,2,0]),this.addMeshIntoGroup(C,v,w,"all-story",[0,-2,0]),this.addMeshIntoGroup(C,v,e,"all-story",[0,-2,0]),this.addDiamondGroupIntoScene(C,"all-story-wrap",[-60,0,0])}},{key:"creatCanvasMaterial",value:function(e){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=12,t.height=12;var o=n.createLinearGradient(0,0,0,12);e.forEach((function(e){o.addColorStop(e.stop,e.color)})),n.fillStyle=o,n.fillRect(0,0,100,100);var a=new s.b(t);return new s.h({map:a})}},{key:"addMeshIntoGroup",value:function(e,t,n,o,a){var i=new s.g(t,n);i.position.set(a[0],a[1],a[2]),i.name=o,e.add(i)}},{key:"addDiamondGroupIntoScene",value:function(e,t,n){e.rotation.set(.1*Math.PI,0,.1*Math.PI),e.position.set(n[0],n[1],n[2]),this.scene.add(e),this.objects.push(e)}},{key:"setDiamondNavWord",value:function(){var e=this;(new s.f).load("assets/fonts/HanWangHeiLight_Regular.json",(function(t){var n=new s.i({color:16711680,specular:16777215});e.addTextMesh("\u8a73\u7d30\u6545\u4e8b",n,"all-story",[-60,-10,20],t),e.addTextMesh("\u8863\u7269\u5206\u6790",n,"cloth-analysis",[-30,20,20],t),e.addTextMesh("\u96a8\u6a5f\u642d\u914d",n,"random-match",[20,20,20],t),e.addTextMesh("\u6295\u7a3f\u6545\u4e8b",n,"share-yours",[50,-10,20],t)}))}},{key:"addTextMesh",value:function(e,t,n,o,a){var i=new s.p(e,{font:a,size:2,height:0}),r=new s.g(i,t);r.position.set(o[0],o[1],o[2]),r.name=n,this.scene.add(r),this.objects.push(r)}},{key:"onMouseClick",value:function(e){this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var t=this.raycaster.intersectObjects(this.objects,!0);if(console.log("intersects",t),t[0])switch(t[0].object.name){case"all-story":console.log("/all-story"),this.router.navigate(["/all-story"]);break;case"cloth-analysis":console.log("/cloth-analysis"),this.router.navigate(["/cloth-analysis"]);break;case"random-match":console.log("random-match"),this.router.navigate(["/random-match"]);break;case"share-yours":console.log("share-yours"),this.router.navigate(["/share-yours"])}}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"animate3",value:function(){var e=this;window.requestAnimationFrame((function(){return e.animate3()})),this.scene.children[0].rotation.y+=.02,this.scene.children[1].rotation.y+=.02,this.scene.children[2].rotation.y+=.02,this.scene.children[3].rotation.y+=.02,this.scene.children[8]&&(this.scene.children[8].rotation.y-=.002),this.renderer.render(this.scene,this.camera),setTimeout((function(){e.loading=!1}))}},{key:"onMouseMove",value:function(e){var t=7+e.pageY/window.innerHeight*6+"%",n=30+e.pageX/window.innerWidth*6+"%",o=36-e.pageX/window.innerWidth*6+"%";this.renderer2.setStyle(this.heartLeft.nativeElement,"top",t),this.renderer2.setStyle(this.heartLeft.nativeElement,"left",n),this.renderer2.setStyle(this.heartRight.nativeElement,"top",t),this.renderer2.setStyle(this.heartRight.nativeElement,"right",o),this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var a=this.raycaster.intersectObjects(this.objects,!0);if(a[0]){if(this.renderer2.setStyle(this.threeJsWrap.nativeElement,"cursor","pointer"),!this.diamondHover){var i=a[0].object.name;this.diamondHover=i,this.changeBackground(i),this.addStar()}}else this.renderer2.setStyle(this.threeJsWrap.nativeElement,"cursor","default"),this.diamondHover=null,this.renderer.setClearColor("#F9E3BD"),this.removeStar()}},{key:"changeBackground",value:function(e){switch(e){case"all-story":this.renderer.setClearColor("#FFDED7");break;case"cloth-analysis":this.renderer.setClearColor("#C0BADD");break;case"random-match":this.renderer.setClearColor("#CCE0EB");break;case"share-yours":this.renderer.setClearColor("#B5CAA0")}}},{key:"addStar",value:function(){var e=(new s.q).load("assets/images/icon/star.png"),t=new s.a,n=new s.m({size:5,sizeAttenuation:!0,map:e,alphaTest:.8,transparent:!1,color:16774817}),o=this.newStarPosition(1e3);t.setAttribute("position",new s.e(o,3));var a=new s.l(t,n);a.name="star-group",this.scene.add(a)}},{key:"newStarPosition",value:function(e){for(var t=[],n=0;n<e;n++){var o=150*Math.random(),a=150*Math.random(),i=150*Math.random();n<e/4?(o=-o,n<e/4-e/8&&(i=-i)):e/4<=n&&n<e/4*2?(a=-a,n<e/4*2-e/8&&(i=-i)):e/4*2<=n&&n<e/4*3?(o=-o,a=-a,n<e/4*3-e/8&&(i=-i)):n<e/4*4-e/8&&(i=-i),t.push(o,a,i)}return t}},{key:"removeStar",value:function(){var e=this.scene.getObjectByName("star-group");this.scene.remove(e)}}]),e}(),f.\u0275fac=function(e){return new(e||f)(c.Nb(h.a),c.Nb(c.F),c.Nb(r.b))},f.\u0275cmp=c.Hb({type:f,selectors:[["cpc-home"]],viewQuery:function(e,t){var n;1&e&&(c.Bc(u,!0),c.Bc(w,!0),c.Bc(m,!0),c.Bc(v,!0)),2&e&&(c.nc(n=c.cc())&&(t.threeJsWrap=n.first),c.nc(n=c.cc())&&(t.heartLeft=n.first),c.nc(n=c.cc())&&(t.heartRight=n.first),c.nc(n=c.cc())&&(t.operateGuideWord=n.first))},hostBindings:function(e,t){1&e&&c.bc("click",(function(e){return t.listenMouseClick(e)}))("mousemove",(function(e){return t.listenMouseMove(e)}))("resize",(function(e){return t.listenWindowResize(e)}),!1,c.qc)},decls:19,vars:1,consts:[[1,"home-wrap"],[1,"three-js-wrap"],["threeJsWrap",""],[4,"ngIf"],[1,"face-wrap"],["svgIcon","face_home_no_mouth",1,"face-home"],[1,"heart-wrap","heart-wrap-left"],["heartLeft",""],["svgIcon","heart"],[1,"heart-wrap","heart-wrap-right"],["heartRight",""],[1,"title-word-area"],[1,"title-wrap"],["svgIcon","logo"]],template:function(e,t){1&e&&(c.Tb(0,"section",0),c.Tb(1,"div",1,2),c.xc(3,C,1,0,"cpc-loading-page",3),c.Sb(),c.Tb(4,"div",4),c.Ob(5,"mat-icon",5),c.Tb(6,"div",6,7),c.Ob(8,"mat-icon",8),c.Sb(),c.Tb(9,"div",9,10),c.Ob(11,"mat-icon",8),c.Sb(),c.Tb(12,"div",11),c.Tb(13,"div",12),c.Ob(14,"mat-icon",13),c.Tb(15,"h1"),c.yc(16,"\u5e73\u6c11\u8863\u7269\u5206\u6790\u9593"),c.Sb(),c.Sb(),c.Tb(17,"p"),c.yc(18,"\u9673\u6021\u975c \u524d\u7aef\u5de5\u7a0b\u5e2b\u4f5c\u54c1 sk573129@gmail.com"),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&e&&(c.Cb(3),c.kc("ngIf",t.loading))},directives:[d.k,l.a,g],styles:[".home-wrap[_ngcontent-%COMP%]{position:relative}.home-wrap[_ngcontent-%COMP%]   .face-wrap[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-20%);text-align:center;z-index:10;display:inline-block;width:650px}.home-wrap[_ngcontent-%COMP%]   .face-wrap[_ngcontent-%COMP%]   mat-icon.face-home[_ngcontent-%COMP%]{color:#e0a4a4;width:50%;height:auto}.home-wrap[_ngcontent-%COMP%]   .face-wrap[_ngcontent-%COMP%]   .heart-wrap[_ngcontent-%COMP%]{position:absolute;width:5%;top:10%}.home-wrap[_ngcontent-%COMP%]   .face-wrap[_ngcontent-%COMP%]   .heart-wrap.heart-wrap-left[_ngcontent-%COMP%]{left:32%}.home-wrap[_ngcontent-%COMP%]   .face-wrap[_ngcontent-%COMP%]   .heart-wrap.heart-wrap-right[_ngcontent-%COMP%]{right:34%}.home-wrap[_ngcontent-%COMP%]   .face-wrap[_ngcontent-%COMP%]   .heart-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#db2b28;width:100%;height:auto}.home-wrap[_ngcontent-%COMP%]   .face-wrap[_ngcontent-%COMP%]   div.title-word-area[_ngcontent-%COMP%] > div.title-wrap[_ngcontent-%COMP%]{margin:10px 0 5px;color:#b63636}.home-wrap[_ngcontent-%COMP%]   .face-wrap[_ngcontent-%COMP%]   div.title-word-area[_ngcontent-%COMP%] > div.title-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:38px;height:auto;display:inline-block;margin-right:8px}.home-wrap[_ngcontent-%COMP%]   .face-wrap[_ngcontent-%COMP%]   div.title-word-area[_ngcontent-%COMP%] > div.title-wrap[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:50px;display:inline-block}.home-wrap[_ngcontent-%COMP%]   .face-wrap[_ngcontent-%COMP%]   div.title-word-area[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:18px}"]}),f)}],_=((b=function e(){_classCallCheck(this,e)}).\u0275mod=c.Lb({type:b}),b.\u0275inj=c.Kb({factory:function(e){return new(e||b)},imports:[[r.e.forChild(y)],r.e]}),b),O=((M=function e(){_classCallCheck(this,e)}).\u0275mod=c.Lb({type:M}),M.\u0275inj=c.Kb({factory:function(e){return new(e||M)},providers:[],imports:[[a.a,i.a,_]]}),M)}}]);